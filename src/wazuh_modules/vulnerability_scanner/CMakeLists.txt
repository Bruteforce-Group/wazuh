cmake_minimum_required(VERSION 3.12.4)

project(vulnerability_scanner)

enable_testing()

add_definitions(-DPROMISE_TYPE=PromiseType::NORMAL)

include_directories(include)

add_subdirectory("src/scanOrchestrator")
add_subdirectory("src/databaseFeedManager")

file(GLOB VULNERABILITY_SCANNER_SRC
    "src/*.cpp"
    )

add_library(vulnerability_scanner SHARED
    ${VULNERABILITY_SCANNER_SRC}
    )

target_link_libraries(vulnerability_scanner scan_orchestrator database_feed router content_manager indexer_connector gcc_s)

set_target_properties(vulnerability_scanner PROPERTIES
        BUILD_RPATH_USE_ORIGIN TRUE
        BUILD_RPATH "$ORIGIN/../lib"
)

#add_subdirectory(testtool)
#add_subdirectory(tests)
